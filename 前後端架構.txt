
畢專寵物App 系統運作說明（前後端分離架構）

一、系統概觀
當前後端分離時，我們的系統被分成兩大部分：

前端 (React)
- 顯示 UI 介面，處理用戶互動，發送 API 請求，接收資料
後端 (Django REST Framework)
- 管理資料庫，處理問題驗證，提供 JSON API

兩者環境狀態：
- React (localhost:3000) 自啟動伺服器
- Django (localhost:8000) 啟動 API 服務

導致這兩者是對第三方連線（有 CORS 問題），所以我們已在 Django 開啟 CORS headers 支援，讓它可以接收 React 的請求。

---

二、前後端互相流程

1. 前端發送 API 請求：
- React 使用 axios (或 fetch)發送 HTTP 請求
- baseURL: http://127.0.0.1:8000/
- 記得添加 withCredentials: true，以保留 session cookie

2. 後端回應 JSON 資料：
- Django DRF API 操作完成請求，回應 JSON格式的答案
- React 接收資料，變更狀態 (state)，渲染畫面

3. 兩者最大比較：
- 後端不提供任何 HTML，只給 JSON
- 前端不管理資料庫，介面從 API 取數

---

三、正確的許可(權限)管理

1. 後端驗證
- API View設定 permission_classes = [IsAuthenticated]
- 有 session cookie 才能讀取 / 修改 資料
- 沒有 session 則回應 401 Unauthorized

2. 前端驗證
- app 啟動時，先發 /main/me/ API
- 若成功：保留用戶資料 (Redux/context)
- 若失敗：清空 localStorage，跳轉到登入頁

3. 登入與登出
- /main/login/：發送 email + password
- /main/logout/：發送 POST，解除 session

---

四、後續操作建議

- 建立全部要保護的 API 加上 IsAuthenticated
- 前端應符合以下流程：
  - 登入成功：保存用戶資料
  - 啟動時：根據 /me 資料判斷是否繼續保持登入
  - 請求 401 時：自動登出，跳到 login

